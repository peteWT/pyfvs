# Expected values for FVS-Python tests
# Based on actual model output with default ecounit (232 - Georgia baseline)
# Updated for establishment model matching Fortran FVS (LSKIPH, FINDAG)

metadata:
  description: "Expected test values for model validation"
  source: "FVS Southern Variant model output with establishment physics"
  updated: "2025-02-08"
  notes: |
    These values reflect FVS-SN model with Fortran-matching establishment:
    - Initial tree: DBH=0.1", HT=0.5 ft (sub-breast-height seedling)
    - First cycle: LSKIPH skip (no height growth)
    - Effective age from height (FINDAG) for subsequent growth
    - Establishment growth modifier for dense young stands
    Default ecounit is 232 (Georgia baseline, coefficient 0.0).

# Growth expectations by species and site index
# Based on actual simulation results with establishment model
growth_expectations:
  LP:  # Loblolly Pine
    site_index_70:
      age_25:
        mean_dbh: [4.5, 6.0]  # inches - actual ~5.2
        mean_height: [33.0, 42.0]  # feet - actual ~37.8
        volume_per_acre: [800, 1200]  # cubic feet per acre - actual ~960
        survival_rate: [0.85, 0.95]  # proportion surviving - actual ~0.89
      age_50:
        mean_dbh: [7.5, 10.0]  # inches - actual ~8.65
        mean_height: [55.0, 66.0]  # feet - actual ~60.3
        volume_per_acre: [3200, 4500]  # cubic feet - actual ~3810
        survival_rate: [0.75, 0.85]  # proportion surviving - actual ~0.81
    site_index_90:
      age_25:
        mean_dbh: [5.5, 7.5]  # larger due to better site
        mean_height: [42.0, 55.0]  # higher site = taller
        volume_per_acre: [1400, 2200]  # higher volume
        survival_rate: [0.85, 0.93]

  SP:  # Shortleaf Pine
    site_index_70:
      age_25:
        mean_dbh: [3.0, 5.0]  # slightly smaller than LP
        mean_height: [25.0, 38.0]  # slower grower
        volume_per_acre: [300, 700]  # lower volume
        survival_rate: [0.85, 0.95]

# Initial planting density effects
# DBH factors relative to 500 TPA baseline
density_effects:
  trees_per_acre_300:
    age_25:
      mean_dbh_factor: 1.08  # larger trees at lower density
      survival_rate: [0.88, 0.95]
  trees_per_acre_700:
    age_25:
      mean_dbh_factor: 0.94  # smaller trees at higher density
      survival_rate: [0.88, 0.95]

# Competition thresholds
competition_thresholds:
  basal_area:
    low_competition: 70  # sq ft/acre at age 20, 200 TPA
    high_competition: 150  # sq ft/acre at age 20, 1000 TPA
  crown_competition_factor:
    low: 100
    high: 200
  # DBH ratio between low (200 TPA) and high (1000 TPA) competition stands
  dbh_ratio_low_to_high: 1.20  # Low competition trees are ~20% larger

# Growth rate expectations (per 5-year period)
# With establishment model, early growth is delayed then accelerates
periodic_growth:
  young_stand:  # Age 10-20 (periods 2-4, post-establishment)
    dbh_increment: [0.3, 2.0]  # inches per 5 years (ramps up)
    height_increment: [4.0, 14.0]  # feet per 5 years (gradual increase)
  mature_stand:  # Age 35-50 (last 3 periods)
    dbh_increment: [0.4, 0.9]  # inches per 5 years (declining growth)
    height_increment: [2.5, 6.0]  # feet per 5 years

# Model transition validation
model_transitions:
  small_to_large_tree:
    dbh_threshold: 3.0  # inches (Xmax)
    smooth_transition: true
    max_discontinuity: 3.0  # Maximum acceptable jump in growth rate (ft/year)
    # Note: Transition uses weighted blend between Xmin=1.0" and Xmax=3.0"
    # to ensure smooth transition between height-driven and DBH-driven models
