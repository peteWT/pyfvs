# Expected values for FVS-Python tests
# Based on actual model output with default ecounit (232 - Georgia baseline)
# Updated for correct LTBHEC-indexed small-tree coefficients

metadata:
  description: "Expected test values for model validation"
  source: "FVS Southern Variant model output with Fortran LTBHEC coefficients"
  updated: "2025-02-09"
  notes: |
    These values reflect FVS-SN model with correct LTBHEC coefficients:
    - Initial tree: DBH=0.1", HT=0.5 ft (sub-breast-height seedling)
    - First cycle: LSKIPH skip (no height growth, matching ESTAB behavior)
    - Effective age from height (FINDAG) for subsequent growth
    - SN uses scale_factor=1.0 (raw LTBHEC coefficients, no SI anchoring)
    - LP LTBHEC row 7: c4=3.5829 (strong S-shape, slow early growth)
    Default ecounit is 232 (Georgia baseline, coefficient 0.0).

# Growth expectations by species and site index
# Based on actual simulation results with LTBHEC coefficients
growth_expectations:
  LP:  # Loblolly Pine
    site_index_70:
      age_25:
        mean_dbh: [2.5, 4.5]  # inches - actual ~3.5
        mean_height: [22.0, 35.0]  # feet - actual ~28.4
        volume_per_acre: [150, 600]  # cubic feet per acre - actual ~321
        survival_rate: [0.88, 0.95]  # proportion surviving - actual ~0.91
      age_50:
        mean_dbh: [6.5, 9.5]  # inches - actual ~7.8
        mean_height: [80.0, 105.0]  # feet - actual ~95.3
        volume_per_acre: [3500, 6000]  # cubic feet - actual ~4722
        survival_rate: [0.78, 0.88]  # proportion surviving - actual ~0.83
    site_index_90:
      age_25:
        mean_dbh: [3.0, 5.5]  # larger due to better site
        mean_height: [28.0, 45.0]  # higher site = taller
        volume_per_acre: [300, 1000]  # higher volume
        survival_rate: [0.85, 0.95]

  SP:  # Shortleaf Pine
    site_index_70:
      age_25:
        mean_dbh: [3.0, 5.0]  # SP grows well
        mean_height: [30.0, 50.0]  # SP faster initial growth with LTBHEC
        volume_per_acre: [300, 900]  # moderate volume
        survival_rate: [0.85, 0.95]

# Initial planting density effects
# Note: Small-tree model doesn't respond to competition until DBH > 1".
# At age 25 with correct LTBHEC, density effects are minimal.
density_effects:
  trees_per_acre_300:
    age_25:
      mean_dbh_factor: 1.00  # minimal effect at young ages
      survival_rate: [0.88, 0.95]
  trees_per_acre_700:
    age_25:
      mean_dbh_factor: 1.00  # minimal effect at young ages
      survival_rate: [0.88, 0.95]

# Competition thresholds
competition_thresholds:
  basal_area:
    low_competition: 30  # sq ft/acre at age 25, 200 TPA
    high_competition: 60  # sq ft/acre at age 25, 1000 TPA
  crown_competition_factor:
    low: 100
    high: 200
  # DBH ratio at age 25 is minimal due to small-tree model limitations
  dbh_ratio_low_to_high: 1.00

# Growth rate expectations (per 5-year period)
# With LTBHEC coefficients, early growth is strongly S-shaped
periodic_growth:
  young_stand:  # Age 10-20 (periods 2-4, post-establishment)
    dbh_increment: [0.0, 2.5]  # inches per 5 years (starts very slow)
    height_increment: [2.0, 15.0]  # feet per 5 years
  mature_stand:  # Age 35-50 (last 3 periods)
    dbh_increment: [0.3, 1.2]  # inches per 5 years (declining growth)
    height_increment: [2.5, 8.0]  # feet per 5 years

# Model transition validation
model_transitions:
  small_to_large_tree:
    dbh_threshold: 3.0  # inches (Xmax)
    smooth_transition: true
    max_discontinuity: 3.0  # Maximum acceptable jump in growth rate (ft/year)
    # Note: Transition uses weighted blend between Xmin=1.0" and Xmax=3.0"
    # to ensure smooth transition between height-driven and DBH-driven models
